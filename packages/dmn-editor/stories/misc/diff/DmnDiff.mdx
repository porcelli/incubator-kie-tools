{/* Licensed to the Apache Software Foundation (ASF) under one */}
{/* or more contributor license agreements. See the NOTICE file */}
{/* distributed with this work for additional information */}
{/* regarding copyright ownership. The ASF licenses this file */}
{/* to you under the Apache License, Version 2.0 (the */}
{/* "License"); you may not use this file except in compliance */}
{/* with the License. You may obtain a copy of the License at */}
{/*  */}
{/* http://www.apache.org/licenses/LICENSE-2.0 */}
{/*  */}
{/* Unless required by applicable law or agreed to in writing, */}
{/* software distributed under the License is distributed on an */}
{/* "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY */}
{/* KIND, either express or implied. See the License for the */}
{/* specific language governing permissions and limitations */}
{/* under the License. */}

import DmnDiff from "./DmnDiff.stories";
import { Meta } from "@storybook/blocks";

<Meta title="MDX/Misc/DmnDiff" of={DmnDiff} />

# DMN Visual Diff

The DMN Visual Diff feature allows users to compare two DMN files side-by-side to identify differences in their models, nodes, and connections.

## Features

### Story #1: Upload Two DMN Files

This story implements the file upload and validation functionality:

- **Two File Upload Controls**: Separate upload areas for "Version A" and "Version B"
- **File Type Validation**: Only accepts `.dmn` file extensions
- **File Size Validation**: Maximum file size of 5MB
- **DMN Content Validation**: Validates that uploaded files contain valid DMN XML
- **Error Handling**: Clear error messages for invalid files
- **File Information Display**: Shows file name after successful upload
- **Clear/Reset Functionality**: Ability to remove uploaded files
- **Drag-and-Drop Support**: Drag files directly into upload areas
- **Compare Button**: Enabled only when both files are successfully loaded

## Usage

1. Click on the upload area or drag and drop a DMN file for Version A
2. Repeat the process for Version B
3. The "Compare Files" button will be enabled once both files are successfully loaded
4. Click "Compare Files" to proceed with the comparison (functionality to be implemented in future stories)

## Validation Rules

- **File Extension**: Must be `.dmn` (case-insensitive)
- **File Size**: Must not exceed 5MB
- **DMN Format**: Must be valid DMN XML that can be parsed by the DMN marshaller
- **Model Structure**: Must contain valid DMN definitions

## Error Messages

- **Invalid Extension**: "Only .dmn files are allowed"
- **File Too Large**: "File size must be less than 5MB"
- **Malformed XML**: "File contains malformed XML"
- **Invalid DMN**: "File is not a valid DMN model"
- **Parsing Error**: "Failed to parse DMN file"

## Technical Implementation

- **State Management**: Zustand for managing file upload state
- **Validation**: Comprehensive file validation using dmn-marshaller APIs
- **UI Components**: PatternFly React components for consistent UX
- **File Processing**: Browser FileReader API for reading file contents
- **DMN Parsing**: Reuses existing dmn-marshaller infrastructure
